#!/usr/bin/env sh

# Pre-commit hook: runs code quality checks before allowing commit

echo "ğŸ” Running pre-commit checks..."

# 1. TypeScript type checking
echo "ğŸ“ Type checking..."
npm run type-check || {
  echo "âŒ TypeScript errors found. Please fix them before committing."
  exit 1
}

# 2. Lint-staged: runs biome + vitest on staged files
echo "ğŸ§¹ Linting and testing staged files..."
npx lint-staged || {
  echo "âŒ Lint-staged failed. Please fix the issues before committing."
  exit 1
}

# 3. Dead code check
echo "ğŸ—‘ï¸  Checking for dead code..."
npm run dead-code || {
  echo "âŒ Dead code found. Please remove unused files/exports before committing."
  exit 1
}

echo "âœ… All pre-commit checks passed!"
